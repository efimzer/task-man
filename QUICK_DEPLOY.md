# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π - 3 –º–∏–Ω—É—Ç—ã

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ Cookie —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É –≤–µ–± –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ side panel
- ‚úÖ GET /state –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON (–Ω–µ HTML)

---

## –®–∞–≥ 1: Backend (1 –º–∏–Ω)

### –ù–∞ Render.com:
1. Dashboard ‚Üí `task-man-rf22` ‚Üí Environment
2. –î–æ–±–∞–≤–∏—Ç—å/–ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
   ```
   NODE_ENV = production
   COOKIE_SECURE = true
   ```
3. Save Changes

### Git Deploy:
```bash
cd /Users/efimzer/todo-ext
git add .
git commit -m "fix: sync issues + cookie auth"
git push origin main
```

**Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç (~2 –º–∏–Ω)**

---

## –®–∞–≥ 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ (30 —Å–µ–∫)

1. –û—Ç–∫—Ä—ã—Ç—å `chrome://extensions`
2. –ù–∞–π—Ç–∏ "GoFimaGo!"
3. –ù–∞–∂–∞—Ç—å **‚ü≥ Reload**

**–ì–æ—Ç–æ–≤–æ!** ‚úÖ

---

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ (1 –º–∏–Ω)

### Test 1: –í–µ–± ‚Üí –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
1. –û—Ç–∫—Ä—ã—Ç—å https://task-man-rf22.onrender.com/auth
2. –í–æ–π—Ç–∏ (efimzer@gmail.com)
3. –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É "Test 1"
4. –û—Ç–∫—Ä—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ (–∏–∫–æ–Ω–∫–∞ –≤ toolbar)
5. **–û–∂–∏–¥–∞–µ–º:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã, –≤–∏–¥–∏–º "Test 1"

### Test 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ ‚Üí –í–µ–±
1. –í —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É "Test 2"
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 5 —Å–µ–∫—É–Ω–¥
3. –û–±–Ω–æ–≤–∏—Ç—å –≤–µ–± (F5)
4. **–û–∂–∏–¥–∞–µ–º:** –í–∏–¥–∏–º "Test 2"

### Test 3: Side Panel
1. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
2. **–û–∂–∏–¥–∞–µ–º:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å–ø—Ä–∞–≤–∞ (side panel), –ù–ï –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞

---

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### Backend –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç?
```bash
curl https://task-man-rf22.onrender.com/health
# –î–æ–ª–∂–Ω–æ: {"ok":true}
```

### Cookie –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è?
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –≤–µ–±
document.cookie
// –î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å: todo_token=...
```

### GET /state –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML?
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Network tab:
GET /state ‚Üí Status –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200
Response –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å JSON, –Ω–µ HTML
```

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è?
```
1. chrome://extensions
2. GoFimaGo! ‚Üí "service worker"
3. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏: "üç™ Cookie changed"
```

---

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

- ‚úÖ `manifest.json` - cookies permission
- ‚úÖ `background.js` - cookie sync, —É–±—Ä–∞–Ω fallback
- ‚úÖ `scripts/auth.js` - cookie reading
- ‚úÖ `scripts/sync.js` - credentials: 'include'
- ‚úÖ `scripts/sidepanel.js` - –µ–¥–∏–Ω—ã–π storage key
- ‚úÖ `server/index.js` - CORS + cookie settings

---

## –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- `FINAL_SUMMARY.md` - –ø–æ–ª–Ω—ã–π –∏—Ç–æ–≥
- `SYNC_FIXES.md` - —á—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- `COOKIE_SYNC_GUIDE.md` - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `PRE_DEPLOY_CHECKLIST.md` - –ø–æ–ª–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç

---

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** 3 –º–∏–Ω—É—Ç—ã  
**–¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:** Backend (auto), –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ (manual reload)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û

üéâ **–í—Å–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!** üéâ
