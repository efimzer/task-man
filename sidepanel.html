<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
    <title>Todo</title>
    <link rel="stylesheet" href="styles/theme-light.css" />
    <link rel="stylesheet" href="styles/theme-dark.css" />
    <link rel="stylesheet" href="styles/app.css" />
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon_io/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon_io/favicon-16x16.png" />
    <link rel="shortcut icon" href="icons/favicon_io/favicon.ico" />
  </head>
  <body>
    <div class="app-shell">
      <section id="screenFolders" class="screen screen-folders">
        <header class="screen-header">
          <h1 class="screen-title">To Do</h1>
          <button class="icon-button primary app-menu-button" aria-label="–ú–µ–Ω—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" type="button">‚ãÆ</button>
        </header>
        <ul id="folderList" class="card-list" role="list"></ul>
      </section>

      <section id="screenTasks" class="screen screen-tasks" aria-live="polite">
        <header class="tasks-header">
          <button id="backToFolders" class="back-button" aria-label="–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–∞–ø–æ–∫"><span class="back-icon"></span></button>
          <div class="tasks-heading">
            <h2 id="tasksHeaderTitle" class="tasks-title">–ó–∞–¥–∞—á–∏</h2>
          </div>
        </header>
        <div class="tasks-scroll">
          <ul id="taskList" class="task-list" role="list"></ul>
          <div id="emptyState" class="empty-state">
            <p class="empty-message">–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç</p>
          </div>
        </div>
      </section>

      <section id="screenSettings" class="screen screen-settings hidden">
        <header class="tasks-header">
          <button id="backToFoldersFromSettings" class="back-button" aria-label="–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–∞–ø–æ–∫"><span class="back-icon"></span></button>
          <div class="tasks-heading">
            <h2 class="tasks-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
          </div>
        </header>
        <div class="tasks-scroll">
          <div class="settings-container">
            <div class="settings-group">
              <h3 class="settings-group-title">–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h3>
              
              <div class="settings-item">
                <div class="settings-item-content">
                  <span class="settings-item-label">–¢—ë–º–Ω–∞—è —Ç–µ–º–∞</span>
                  <span class="settings-item-description">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É</span>
                </div>
                <label class="settings-toggle">
                  <input type="checkbox" id="darkModeToggle" />
                  <span class="settings-toggle-slider"></span>
                </label>
              </div>

              <div class="settings-item">
                <div class="settings-item-content">
                  <span class="settings-item-label">–°—á—ë—Ç—á–∏–∫ –∑–∞–¥–∞—á</span>
                  <span class="settings-item-description">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á</span>
                </div>
                <label class="settings-toggle">
                  <input type="checkbox" id="showCounterToggle" checked />
                  <span class="settings-toggle-slider"></span>
                </label>
              </div>

              <div class="settings-item">
                <div class="settings-item-content">
                  <span class="settings-item-label">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∞—Ä—Ö–∏–≤</span>
                  <span class="settings-item-description">–ü–∞–ø–∫–∞ "–ê—Ä—Ö–∏–≤" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π</span>
                </div>
                <label class="settings-toggle">
                  <input type="checkbox" id="showArchiveToggle" checked />
                  <span class="settings-toggle-slider"></span>
                </label>
              </div>
            </div>

            <div class="settings-group">
              <h3 class="settings-group-title">–î–∞–Ω–Ω—ã–µ</h3>
              
              <button type="button" id="clearArchiveButton" class="settings-button">
                <span class="settings-button-icon">üóëÔ∏è</span>
                <div class="settings-button-content">
                  <span class="settings-button-label">–û—á–∏—Å—Ç–∏—Ç—å –∞—Ä—Ö–∏–≤</span>
                  <span class="settings-button-description">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏</span>
                </div>
              </button>
            </div>

            <div class="settings-group">
              <h3 class="settings-group-title">–ê–∫–∫–∞—É–Ω—Ç</h3>
              
              <button type="button" id="changePasswordButton" class="settings-button">
                <span class="settings-button-icon">üîí</span>
                <div class="settings-button-content">
                  <span class="settings-button-label">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</span>
                  <span class="settings-button-description">–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞</span>
                </div>
              </button>

              <button type="button" id="logoutButton" class="settings-button settings-button-danger">
                <span class="settings-button-icon">üö™</span>
                <div class="settings-button-content">
                  <span class="settings-button-label">–í—ã–π—Ç–∏</span>
                  <span class="settings-button-description">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</span>
                </div>
              </button>
            </div>
          </div>
        </div>
      </section>
    </div>

    <template id="folderTemplate">
      <li class="entry-card folder-item" data-folder-id="" tabindex="0" role="button">
        <div class="folder-content">
          <span class="folder-name"></span>
          <span class="folder-count badge"></span>
        </div>
        <button class="folder-menu-button" aria-label="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è" type="button">‚ãÆ</button>
      </li>
    </template>

    <template id="taskTemplate">
      <li class="entry-card task-item" data-task-id="" draggable="true">
        <span class="drag-handle" role="presentation" aria-hidden="true">‚ãÆ‚ãÆ</span>
        <label class="checkbox">
          <input type="checkbox" aria-label="–û—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π" />
          <span class="checkbox-visual"></span>
        </label>
        <div class="task-body">
          <span class="task-title" tabindex="0"></span>
          <span class="task-folder-label"></span>
        </div>
        <button class="icon-button primary task-remove" aria-label="–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É –∏–∑ –∞—Ä—Ö–∏–≤–∞" type="button"><span class="icon-plus icon-plus-rotate">Ôºã</span></button>
      </li>
    </template>

    <div id="folderMenu" class="folder-menu hidden" role="menu">
      <button type="button" class="folder-menu-item" data-action="rename">–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å</button>
      <button type="button" class="folder-menu-item" data-action="delete">–£–¥–∞–ª–∏—Ç—å</button>
    </div>

    <div id="appMenu" class="folder-menu app-menu hidden" role="menu">
      <button type="button" id="settingsAction" class="folder-menu-item">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
      <button type="button" id="logoutAction" class="folder-menu-item">–í—ã–π—Ç–∏</button>
      <button type="button" id="clearArchiveAction" class="folder-menu-item">–û—á–∏—Å—Ç–∏—Ç—å –∞—Ä—Ö–∏–≤</button>
    </div>

    <div id="modalBackdrop" class="modal-backdrop hidden"></div>
    <section id="folderModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="folderModalTitle">
      <div class="modal-card">
        <header class="modal-header">
          <h2 id="folderModalTitle" class="modal-title">–ù–æ–≤–∞—è –ø–∞–ø–∫–∞</h2>
        </header>
        <form id="folderModalForm" class="modal-body" autocomplete="off">
          <label class="field">
            <input id="folderModalInput" type="text" class="input" maxlength="60" />
          </label>
          <footer class="modal-actions">
            <button type="button" id="folderModalCancel" class="ghost-button">–û—Ç–º–µ–Ω–∞</button>
            <button type="submit" class="primary-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </footer>
        </form>
      </div>
    </section>

    <button id="floatingActionButton" class="fab" type="button" aria-label="–î–æ–±–∞–≤–∏—Ç—å">Ôºã</button>

    <div id="authOverlay" class="auth-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="authTitle">
      <div class="auth-card">
        <h2 id="authTitle" class="auth-heading">–í—Ö–æ–¥</h2>
        <form id="authForm" class="auth-form" autocomplete="off">
          <label class="field">
            <span class="field-label">Email</span>
            <input id="authEmail" type="email" class="input" autocomplete="email" required />
          </label>
          <label class="field">
            <span class="field-label">–ü–∞—Ä–æ–ª—å</span>
            <input id="authPassword" type="password" class="input" autocomplete="current-password" required minlength="6" />
          </label>
          <p id="authError" class="auth-inline-error" role="alert"></p>
          <div class="auth-actions">
            <button id="authSubmit" type="submit" class="primary-button">–í–æ–π—Ç–∏</button>
            <button id="authToggleMode" type="button" class="ghost-button">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          </div>
        </form>
      </div>
    </div>

    <script type="module" src="scripts/sidepanel.js"></script>
  </body>
</html>
